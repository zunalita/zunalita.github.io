<footer class="site-footer h-card">
  <data class="u-url" href="{{ "/" | relative_url }}"></data>

  <div class="wrapper">

    <h2 class="footer-heading">{{ site.title | escape }}</h2>

    <div class="footer-col-wrapper">

      <div class="footer-social">
        {%- include social.html -%}
      </div>

      <div class="footer-col footer-col-3">
        <p>{{- site.description | escape -}}</p>
      </div>

      <!-- Dynamic columns by footer section -->
      {% assign all_sections = site.pages | map: "footer_section" | uniq | compact %}
      {% assign col_index = 4 %}
      {% for section in all_sections %}
        <div class="footer-col footer-col-{{ col_index }}">
          <h3>{{ section }}</h3>
          <ul>
            {% for page in site.pages %}
              {% if page.footer_section == section and page.title %}
                <li><a href="{{ page.url | relative_url }}">{{ page.title | escape }}</a></li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
        {% assign col_index = col_index | plus: 1 %}
      {% endfor %}

    </div>
  </div>
</footer>
